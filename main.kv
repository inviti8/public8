#:kivy 1.11.1
#:import hex kivy.utils.get_color_from_hex

#Shared attributes
<Popup>:
    color:  0, .7, .8, 1

<FileChooserIconView>:
    dirselect: True

<AppButton>:
    markup: True
    background_normal:''
    background_color:0,0,0,0
    color: 0,0,0,0
    opacity: 1
    on_press: self.on_btn_press(self)
    canvas.before:
        Color:
            rgba: hex('#6d398a')
        RoundedRectangle:
            radius: 5, 5, 5, 5
            pos: self.pos
            size: self.size

<AppSpinner>:
    size: 30, 44
    size_hint: 1, 0.85
    color:  0,0,0,0
    background_color: 0,0,0,0
    opacity: 1
    on_text: self.on_spinner_change()
    on_press: self.on_btn_press(self)
    size_hint: 0.5, 0.7
    canvas.before:
        Color:
            rgba: hex('#3a2c48')
        RoundedRectangle:
            radius: 30, 5, 5, 5
            pos: self.pos
            size: self.size
    canvas.after:
        Rectangle:
            size:30, 16
            pos: self.pos
            source: 'dropdown_symbol.png'

<AppTextInput>:
    background_color: 0, 0, 0, 1
    foreground_color: hex('#5dd6c9')
    on_text: self.on_text_input_change()
    font_size: 10

<ConsoleTextInput>:
    background_color: 0, 0, 0, 1
    foreground_color: hex('#5dd6c9')
    readonly: True
    on_text: self.on_text_input_change()

<Label>:
    color: hex('#5dd6c9')
    markup: True
    font_size: 15
    font_name: 'Staatliches-Regular.ttf'

<TabLayout>:
    size_hint: 1, 1
    pos_hint: {'center_x': .5, 'center_y': .5}
    do_default_tab: False
    color:  0, 0, 0, 1
    rows: 3

    canvas: 
        Color: 
            rgba: hex('#3a2c48')
        RoundedRectangle:
            radius: 5, 5, 5, 5 
            pos: self.pos 
            size: self.size 
    
    TabbedPanelItem:
        id: main_tab
        text: 'PUBLISH'
        font_size: 20
        background_color:  0, 0, 0, 0
        opacity: 1
        on_touch_up: root.on_tab_touch(self, id)
        active: True

        canvas.before:
            Color:
                rgba: hex('#4a395c')
            RoundedRectangle:
                radius: 2, 30, 0, 0
                pos: self.pos
                size: self.size
        GridLayout:
            cols: 2
            canvas: 
                Color: 
                    rgba: hex('#4a395c')
                RoundedRectangle:
                    radius: 5, 5, 5, 5 
                    pos: self.pos 
                    size: self.size 

            BoxLayout:
                orientation: 'vertical'
                canvas.before:
                    Color:
                        rgba: 1,1,1,0.03
                    Triangle:
                        points:[0, self.height, self.width-(.4*self.height), self.height, 0, self.height*0.8]
                    Color:
                        rgba: 1,1,1,0.03
                    Triangle:
                        points:[0, self.height, self.width*1, self.height, 0, self.height-(.4*self.height)]


                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.15
         
                    AppSpinner:
                        id: type_spinner
                        name: "TYPE_SPINNER"
                        text: "Journalism"
                        values: "Journalism", "Literary", "Graphic"


                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.15

                    AppTextInput:
                        id: title_text_input
                        name: "TITLE_TEXT_INPUT"
                        text: "Enter Title"
                        size_hint: 1, 0.7
                        multiline: False


                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.15

                    AppTextInput:
                        id: author_text_input
                        name: "AUTHOR_TEXT_INPUT"
                        text: "Enter Author"
                        size_hint: 1, 0.7

                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.15

                    AppSpinner:
                        id: img_layout_spinner
                        name: "IMG_LAYOUT_SPINNER"
                        text: "Image Align:Left"
                        values: "Image Align:Left", "Image Align:Right", "Image Align:Alternate"


                BoxLayout:
                    orientation: 'vertical'
                    padding: 10
                    size_hint: 1, 0.65

                    Label:
                        text: "Inline CSS"
                        size_hint: 0.15, 0.1

                    AppTextInput:
                        id: css_text_input
                        name: "CSS_TEXT_INPUT"
                        text: root.update_css(self)
                        size: 25, 22
                        font_size: 11
                        

            BoxLayout:
                orientation: 'vertical'

                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.135

                    AppSpinner:
                        id: content_type_spinner
                        name: "CONTENT_TYPE_SPINNER"
                        text: "Docx"
                        values: "Docx", "Psd", "Video"



                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.14

                    AppTextInput:
                        id: content_path_text_input
                        name: "CONTENT_PATH_TEXT_INPUT"
                        size_hint: 1, 0.7
                        text: "Load Content Source"
                        size: 50, 44
                        font_size: 11

                    AppButton:
                        id: content_path_load_button
                        name: "CONTENT_PATH_LOAD_BUTTON"
                        text: "LOAD"
                        size_hint: 0.2, 0.7

                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.135

                    AppSpinner:
                        id: theme_spinner
                        name: "THEME_SPINNER"
                        size_hint: 1, 0.7
                        text: "Dark Theme"
                        values: "Dark Theme", "Light Theme", "Gray Theme"

                    AppButton:
                        id: theme_load_button
                        name: "THEME_LOAD_BUTTON"
                        text: "LOAD"
                        size_hint: 0.2, 0.7

                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.135
                        
                    AppSpinner:
                        id: template_spinner
                        name: "TEMPLATE_SPINNER"
                        text: "header_carousel"
                        values: "header_carousel", "simple_carousel"

                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.14
                        
                    AppSpinner:
                        id: page_direction_spinner
                        name: "PAGE_DIRECTION_SPINNER"
                        text: "horizontal"
                        values: "horizontal", "vertical"

                BoxLayout:
                    orientation: 'horizontal'
                    padding: 10
                    size_hint: 1, 0.25
                    spacing: 15

                    AppButton:
                        id: test_app_button
                        name: "TEST_APP_BUTTON"
                        text: "TEST"
                        font_size: 24
                        size_hint: 0.2, 0.7
                        canvas.before:
                            Color:
                                rgba: hex('#ff6247')
                            RoundedRectangle:
                                radius: 5, 5, 5, 5
                                pos: self.pos
                                size: self.size

                    AppButton:
                        id: deploy_app_button
                        name: "DEPLOY_APP_BUTTON"
                        text: "DEPLOY"
                        font_size: 24
                        size_hint: 0.2, 0.7
                        canvas.before:
                            Color:
                                rgba: hex('#348a26')
                            RoundedRectangle:
                                radius: 5, 5, 5, 5
                                pos: self.pos
                                size: self.size
                
                        
                BoxLayout:
                    orientation: 'vertical'
                    padding: 10
                    size_hint: 1, 0.2

                    ConsoleTextInput:
                        id: console_text_input
                        name: "CONSOLE_TEXT_INPUT"
                        text: "Console"
                        size_hint: 1, 0.2
                        size: 50, 20
            

    TabbedPanelItem:
        id: arweave_tab
        text: 'ARWEAVE'
        font_size: 15
        color: 1,1,1,1
        background_color:  0, 0, 0, 0
        opacity: 0.5
        on_touch_up: root.on_tab_touch(self)
        active: False

        canvas.before:
            Color:
                rgba: hex('#4a395c')
            RoundedRectangle:
                radius: 2, 30, 0, 0
                pos: self.pos
                size: self.size

        canvas.after:
            Rectangle:
                size:100, 30
                pos: self.pos
                source: 'arweave_logo.png'

        BoxLayout:
            orientation: 'vertical'
            size_hint: 1, 1
            spacing: 0.1
            canvas: 
                Color: 
                    rgba: hex('#4a395c')
                RoundedRectangle:
                    radius: 5, 5, 5, 5 
                    pos: self.pos 
                    size: self.size

            BoxLayout:
                orientation: 'vertical'
                size_hint: 1, 0.3
                padding: 10 

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, 0.3

                    Label:
                        text: "Key Path"
                        size_hint: 0.1, 0.3

                    AppTextInput:
                        id: wallet_key_text_input
                        name: "WALLET_KEY_TEXT_INPUT"
                        size_hint: 0.9, 0.3
                        font_size: 10

                    AppButton:
                        id: load_wallet_key_button
                        name: "LOAD_WALLET_KEY_BUTTON"
                        text: "LOAD KEY FILE"
                        size_hint: 0.3, 0.3

                BoxLayout:
                    orientation: 'horizontal'
                    size_hint: 1, 0.3

                    Label:
                        text: "Hash"
                        size_hint: 0.1, 0.3

                    AppTextInput:
                        id: transaction_hash_text_input
                        name: "TRANSACTION_HASH_TEXT_INPUT"
                        size_hint: 0.9, 0.3
                        font_size: 10

                    AppButton:
                        id: transaction_status_button
                        name: "TRANSACTION_STATUS_BUTTON"
                        text: "STATUS"
                        size_hint: 0.3, 0.3

            BoxLayout:
                orientation: 'horizontal'
                size_hint: 0.95, 0.1
                padding: 1
                spacing: 1

                Label:
                    text: "   "
                    size_hint: 0.1, 0.5

            # AppButton:
            #     id: create_wallet_key_button
            #     name: "SAVE_WALLET_KEY_BUTTON"
            #     text: "SAVE KEY FILE"
            #     size_hint: 1, 0.1

            # AppButton:
            #     id: forget_wallet_key_button
            #     name: "FORGET_WALLET_KEY_BUTTON"
            #     text: "FORGET KEY"
            #     size_hint: 1, 0.1
            
            BoxLayout:
                orientation: 'vertical'
                padding: 10
                size_hint: 1, 0.1
                AppButton:
                    id: wallet_balance_button
                    name: "WALLET_BALANCE_BUTTON"
                    text: "WALLET BALANCE"
                    font_size: 24
                    size_hint: 1, 0.1

            BoxLayout:
                orientation: 'vertical'
                padding: 10
                size_hint: 1, 0.35

                ConsoleTextInput:
                    id: wallet_console_text_input
                    name: "CONSOLE_WALLET_TEXT_INPUT"
                    text: "Wallet Console"
                    font_size: 20
                    size_hint: 1, 1
                    size: 50, 50